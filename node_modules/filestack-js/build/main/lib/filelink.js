"use strict";
/*
 * Copyright (c) 2018 by Filestack
 * Some rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.Filelink = exports.EnhancePreset = exports.VideoAccessMode = exports.VideoAccess = exports.Locations = exports.URLScreenshotOrientation = exports.URLScreenshotMode = exports.URLScreenshotAgent = exports.VideoTypes = exports.AudioTypes = exports.SmartCropMode = exports.ImageWatermarkPosition = exports.CropfacesType = exports.ColorspaceType = exports.StyleType = exports.NoiseType = exports.ShapeType = exports.BlurMode = exports.FitOptions = exports.Align = void 0;
var tslib_1 = require("tslib");
var config_1 = require("./../config");
var transforms_schema_1 = require("./../schema/transforms.schema");
var validator_1 = require("./../schema/validator");
var utils_1 = require("./utils");
var filestack_error_1 = require("./../filestack_error");
var debug_1 = tslib_1.__importDefault(require("debug"));
var debug = (0, debug_1.default)('fs:filelink');
var Align;
(function (Align) {
    Align["left"] = "left";
    Align["right"] = "right";
    Align["center"] = "center";
    Align["bottom"] = "bottom";
    Align["top"] = "top";
    Align["faces"] = "faces";
    Align["middle"] = "middle";
})(Align = exports.Align || (exports.Align = {}));
/**
 * Fit enum
 */
var FitOptions;
(function (FitOptions) {
    FitOptions["clip"] = "clip";
    FitOptions["crop"] = "crop";
    FitOptions["scale"] = "scale";
    FitOptions["max"] = "max";
})(FitOptions = exports.FitOptions || (exports.FitOptions = {}));
/**
 * Blur enum
 */
var BlurMode;
(function (BlurMode) {
    BlurMode["linear"] = "linear";
    BlurMode["gaussian"] = "gaussian";
})(BlurMode = exports.BlurMode || (exports.BlurMode = {}));
/**
 * Shapes enum
 */
var ShapeType;
(function (ShapeType) {
    ShapeType["oval"] = "oval";
    ShapeType["rect"] = "rect";
})(ShapeType = exports.ShapeType || (exports.ShapeType = {}));
/**
 * Noise type enum
 */
var NoiseType;
(function (NoiseType) {
    NoiseType["none"] = "none";
    NoiseType["low"] = "low";
    NoiseType["medium"] = "medium";
    NoiseType["high"] = "high";
})(NoiseType = exports.NoiseType || (exports.NoiseType = {}));
/**
 * Style type enum
 */
var StyleType;
(function (StyleType) {
    StyleType["artwork"] = "artwork";
    StyleType["photo"] = "photo";
})(StyleType = exports.StyleType || (exports.StyleType = {}));
/**
 * Color space enum
 */
var ColorspaceType;
(function (ColorspaceType) {
    ColorspaceType["RGB"] = "RGB";
    ColorspaceType["CMYK"] = "CMYK";
    ColorspaceType["Input"] = "Input";
})(ColorspaceType = exports.ColorspaceType || (exports.ColorspaceType = {}));
/**
 * Crop faces options enum
 */
var CropfacesType;
(function (CropfacesType) {
    CropfacesType["thumb"] = "thumb";
    CropfacesType["crop"] = "crop";
    CropfacesType["fill"] = "fill";
})(CropfacesType = exports.CropfacesType || (exports.CropfacesType = {}));
/**
 * Watermark postion options enum
 */
var ImageWatermarkPosition;
(function (ImageWatermarkPosition) {
    ImageWatermarkPosition["top"] = "top";
    ImageWatermarkPosition["middle"] = "middle";
    ImageWatermarkPosition["bottom"] = "bottom";
    ImageWatermarkPosition["left"] = "left";
    ImageWatermarkPosition["center"] = "center";
    ImageWatermarkPosition["right"] = "right";
})(ImageWatermarkPosition = exports.ImageWatermarkPosition || (exports.ImageWatermarkPosition = {}));
/**
 * SmartCrop options enum
 */
var SmartCropMode;
(function (SmartCropMode) {
    SmartCropMode["face"] = "face";
    SmartCropMode["auto"] = "auto";
})(SmartCropMode = exports.SmartCropMode || (exports.SmartCropMode = {}));
/**
 * Convert to format
 */
var AudioTypes;
(function (AudioTypes) {
    AudioTypes["libmp3lame"] = "libmp3lame";
    AudioTypes["libvorbis"] = "libvorbis";
    AudioTypes["libfdk_aac"] = "libfdk_aac";
    AudioTypes["dib_ac3"] = "dib_ac3";
    AudioTypes["pcm_s16le"] = "pcm_s16le";
    AudioTypes["mp2"] = "mp2";
    AudioTypes["ac3"] = "ac3";
    AudioTypes["eac3"] = "eac3";
})(AudioTypes = exports.AudioTypes || (exports.AudioTypes = {}));
/**
 * Convert to format
 */
var VideoTypes;
(function (VideoTypes) {
    VideoTypes["h264"] = "h264";
    VideoTypes["h264_hi"] = "h264.hi";
    VideoTypes["webm"] = "webm";
    VideoTypes["webm-hi"] = "webm.hi";
    VideoTypes["ogg"] = "ogg";
    VideoTypes["ogg-hi"] = "ogg.hi";
    VideoTypes["hls-variant"] = "hls.variant";
    VideoTypes["mp3"] = "mp3";
    VideoTypes["oga"] = "oga";
    VideoTypes["m4a"] = "m4a";
    VideoTypes["aac"] = "aac";
    VideoTypes["hls"] = "hls.variant.audio";
})(VideoTypes = exports.VideoTypes || (exports.VideoTypes = {}));
var URLScreenshotAgent;
(function (URLScreenshotAgent) {
    URLScreenshotAgent["desktop"] = "desktop";
    URLScreenshotAgent["mobile"] = "mobile";
})(URLScreenshotAgent = exports.URLScreenshotAgent || (exports.URLScreenshotAgent = {}));
var URLScreenshotMode;
(function (URLScreenshotMode) {
    URLScreenshotMode["all"] = "all";
    URLScreenshotMode["window"] = "window";
})(URLScreenshotMode = exports.URLScreenshotMode || (exports.URLScreenshotMode = {}));
var URLScreenshotOrientation;
(function (URLScreenshotOrientation) {
    URLScreenshotOrientation["portrait"] = "portrait";
    URLScreenshotOrientation["landscape"] = "landscape";
})(URLScreenshotOrientation = exports.URLScreenshotOrientation || (exports.URLScreenshotOrientation = {}));
/**
 * Video storage location
 */
var Locations;
(function (Locations) {
    Locations["s3"] = "s3";
    Locations["azure"] = "azure";
    Locations["gcs"] = "gcs";
    Locations["rackspace"] = "rackspace";
    Locations["dropbox"] = "dropbox";
})(Locations = exports.Locations || (exports.Locations = {}));
var VideoAccess;
(function (VideoAccess) {
    VideoAccess["private"] = "private";
    VideoAccess["public"] = "public";
})(VideoAccess = exports.VideoAccess || (exports.VideoAccess = {}));
var VideoAccessMode;
(function (VideoAccessMode) {
    VideoAccessMode["preserve"] = "preserve";
    VideoAccessMode["constrain"] = "constrain";
    VideoAccessMode["letterbox"] = "letterbox";
    VideoAccessMode["pad"] = "pad";
    VideoAccessMode["crop"] = "crop";
})(VideoAccessMode = exports.VideoAccessMode || (exports.VideoAccessMode = {}));
var EnhancePreset;
(function (EnhancePreset) {
    EnhancePreset["auto"] = "auto";
    EnhancePreset["vivid"] = "vivid";
    EnhancePreset["beautify"] = "beautify";
    EnhancePreset["beautifyPlus"] = "beautify_plus";
    EnhancePreset["fixDark"] = "fix_dark";
    EnhancePreset["fixNoise"] = "fix_noise";
    EnhancePreset["fixTint"] = "fix_tint";
    EnhancePreset["outdor"] = "outdoor";
    EnhancePreset["fireworks"] = "fireworks";
})(EnhancePreset = exports.EnhancePreset || (exports.EnhancePreset = {}));
var handleRegexp = /^[\w\-]{20}|wf:\/\/[\w\-\/]{106}$/;
/**
 * Class for handling filelinks. For now its supports all filestack transforms.
 * It outputs transform url or array of transforms
 * @example
 * const link = new Filelink('handle or externalUrl', 'apikey');
 * link.flip().flop().store();
 *
 * console.log(link.toString());
 * // enable base64 support
 * link.setBase64(true)
 *
 * console.log(link.toString());
 *
 * @export
 * @class Filelink
 */
var Filelink = /** @class */ (function () {
    /**
     * Class for generating tranformation urls
     * @param {(string | string[])} source - handle or multiple handles (i.e. for collage)
     * @param {string} [apikey] - your apikey - required for all external sources
     *
     * @memberof Filelink
     */
    function Filelink(source, apikey) {
        /**
         * Applied transforms array
         *
         * @private
         * @memberof Filelink
         */
        this.transforms = [];
        /**
         * Is base64 support is enabled
         *
         * @private
         * @type {boolean}
         * @memberof Filelink
         */
        this.b64 = false;
        /**
         * should use a validator to check params of every task
         * @private
         * @type {boolean}
         * @memberof Filelink
         */
        this.useValidator = true;
        /**
         * Converts array of objects to object
         *
         * @private
         * @example [{name: 'resize', params: {height: 125}}] => {resize: {height: 125}}
         * @param arr - any array
         */
        this.arrayToObject = function (array, nameKey, dataKey) {
            if (array === void 0) { array = []; }
            return array.reduce(function (obj, item) {
                obj[item[nameKey]] = item[dataKey];
                return obj;
            }, {});
        };
        this.apikey = apikey;
        this.setSource(source);
    }
    /**
     * Enable new base64 link support to avoid problems with special chars in link
     *
     * @param {boolean} flag
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setBase64 = function (flag) {
        this.b64 = flag;
        return this;
    };
    /**
     * Switch the useValidator flag
     *
     * @param {boolean} flag
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setUseValidator = function (flag) {
        this.useValidator = flag;
        return this;
    };
    /**
     * Set cname for transformation link
     *
     * @param {string} cname
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setCname = function (cname) {
        this.cname = cname;
        return this;
    };
    /**
     * Set custom domain. Used for test purpose. It will be removed when after client.transform
     *
     * @param {string} domain
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.setCustomDomain = function (domain) {
        this.customDomain = domain;
        return this;
    };
    Filelink.prototype.setSource = function (source) {
        this.source = source;
        var isExternal = this.isSourceExternal();
        debug("Source ".concat(source, " - isExternal? ").concat(isExternal));
        if (isExternal && !this.apikey) {
            throw new filestack_error_1.FilestackError('External sources requires apikey to handle transforms');
        }
        if (!isExternal && typeof this.source === 'string' && !handleRegexp.test(this.source) && this.source.indexOf('filestackcontent') === -1) {
            throw new filestack_error_1.FilestackError('Invalid filestack source provided');
        }
    };
    /**
     * Returns JSONSchema form transformations params
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.getValidationSchema = function () {
        return transforms_schema_1.TransformSchema;
    };
    /**
     * Returns transformations in JSON format
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.getTransformations = function () {
        if (this.useValidator) {
            this.validateTasks(this.transforms);
        }
        return this.transforms;
    };
    /**
     * Returns transform url
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.toString = function () {
        var returnUrl = [];
        returnUrl.push(this.getCdnHost());
        if (this.useValidator) {
            this.validateTasks(this.transforms);
        }
        if (this.apikey) {
            returnUrl.push(this.apikey);
        }
        var transformsString = this.generateTransformString();
        var source = this.source;
        if (this.b64) {
            if (this.transforms.length > 0) {
                transformsString = "b64/".concat((0, utils_1.b64)(JSON.stringify(this.transforms), true));
            }
            if (Array.isArray(source)) {
                source = this.arrayToString(source);
            }
            source = "b64://".concat((0, utils_1.b64)(source, true));
        }
        else {
            if (Array.isArray(source)) {
                source = this.arrayToString(source);
            }
            else {
                source = this.escapeValue(source);
            }
        }
        if (transformsString.length) {
            returnUrl.push(transformsString);
        }
        returnUrl.push(source);
        return returnUrl.join('/');
    };
    /**
     * Add task and validate
     *
     * @param {string} name
     * @param {*} [params]
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.addTask = function (name, params) {
        (0, debug_1.default)("Add task  ".concat(name, " with params %O"), params);
        if (name !== 'cache' && typeof params === 'boolean') {
            if (!params) {
                return this;
            }
            else {
                params = undefined;
            }
        }
        else if (typeof params === 'object' && !Object.keys(params).length) {
            params = undefined;
        }
        this.transforms.push({ name: name, params: params });
        return this;
    };
    /**
     * Returns all tasks added for transformation
     *
     * @memberof Filelink
     */
    Filelink.prototype.getTasks = function () {
        return this.transforms;
    };
    /**
     * Cleanup transformations on filelink
     *
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.reset = function () {
        this.transforms = [];
        return this;
    };
    /**
     * Transformations part
     */
    /**
     * Add autoimage transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#auto-image-conversion
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.autoImage = function () {
        return this.addTask('auto_image', true);
    };
    /**
     * Adds flip transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#flip
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.flip = function () {
        return this.addTask('flip', true);
    };
    /**
     * Adds flop transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#flop
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.flop = function () {
        return this.addTask('flop', true);
    };
    /**
     * Adds imagesize transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#image-size
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.imagesize = function () {
        return this.addTask('imagesize', true);
    };
    /**
     * Adds noMetadata transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#strip-metadata
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.noMetadata = function () {
        return this.addTask('no_metadata', true);
    };
    /**
     * Adds Progressive JPEG transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#progressive-jpeg
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.pjpg = function (params) {
        return this.addTask('pjpg', params);
    };
    /**
     * Adds imagesize transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#smart-crop
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.smartCrop = function (params) {
        return this.addTask('smart_crop', params);
    };
    /**
     * Adds watermart transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#watermark
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.watermark = function (params) {
        return this.addTask('watermark', params);
    };
    /**
     * Adds enhance transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#enhance
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.enhance = function (params) {
        return this.addTask('enhance', params || true);
    };
    /**
     * Add security to link
     *
     * @see https://www.filestack.com/docs/api/processing/#redeye
     * @returns
     * @memberof Filelink
     */
    Filelink.prototype.redeye = function () {
        return this.addTask('redeye', true);
    };
    /**
     * Add monochrome transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#monochrome
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.monochrome = function () {
        return this.addTask('monochrome', true);
    };
    /**
     * Add compress transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#compress
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.compress = function (params) {
        return this.addTask('compress', params || true);
    };
    /**
     * Adds negative transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#negative
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.negative = function () {
        return this.addTask('negative', true);
    };
    /**
     * Adds tags transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#tags
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.tags = function () {
        return this.addTask('tags', true);
    };
    /**
     * Adds sfw transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#sfw
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.sfw = function () {
        return this.addTask('sfw', true);
    };
    /**
     * Add animate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#animate-images-to-gif
     * @param params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.animate = function (params) {
        return this.addTask('animate', params);
    };
    /**
     * Adds store transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#store
     * @param {(StoreParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.store = function (params) {
        return this.addTask('store', params);
    };
    /**
     * Adds cache transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#cache
     * @param {(CacheParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.cache = function (params) {
        return this.addTask('cache', params);
    };
    /**
     * Adds resize transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#resize
     * @param {ResizeParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.resize = function (params) {
        return this.addTask('resize', params);
    };
    /**
     * Adds crop transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#crop
     * @param {CropParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.crop = function (params) {
        return this.addTask('crop', params);
    };
    /**
     * Adds rotate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#rotate
     * @param {RotateParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.rotate = function (params) {
        return this.addTask('rotate', params);
    };
    /**
     * Adds detect_faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#facial-detection
     * @param {(DetectFacesParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.detectFaces = function (params) {
        return this.addTask('detect_faces', params);
    };
    /**
     * Adds crop faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#crop-faces
     * @param {CropFacesParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.cropFaces = function (params) {
        return this.addTask('crop_faces', params);
    };
    /**
     * Adds pixelate faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pixelate-faces
     * @param {PixelateFacesParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.pixelateFaces = function (params) {
        return this.addTask('pixelate_faces', params);
    };
    /**
     * Adds blur faces transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#blur-faces
     * @param {BlurFacesParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.blurFaces = function (params) {
        return this.addTask('blur_faces', params);
    };
    /**
     * Adds rounded corners transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#rounded-corners
     * @param {(RoundedCornersParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.roundedCorners = function (params) {
        return this.addTask('rounded_corners', params);
    };
    /**
     * Adds polaroid transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#polaroid
     * @param {(PolaroidParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.polaroid = function (params) {
        return this.addTask('polaroid', params);
    };
    /**
     * Adds vignette transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#vignette
     * @param {(VignetteParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.vignette = function (params) {
        return this.addTask('vignette', params);
    };
    /**
     * Adds torn edges transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#torn-edges
     * @param {(TornEdgesParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.tornEdges = function (params) {
        return this.addTask('torn_edges', params);
    };
    /**
     * Adds shadow transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#shadow
     * @param {(ShadowParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.shadow = function (params) {
        return this.addTask('shadow', params);
    };
    /**
     * Adds circle transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#circle
     * @param {(CircleParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.circle = function (params) {
        return this.addTask('circle', params);
    };
    /**
     * Adds border transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#border
     * @param {(BorderParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.border = function (params) {
        return this.addTask('border', params);
    };
    /**
     * Adds sharpen transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#sharpen
     * @param {(SharpenParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.sharpen = function (params) {
        return this.addTask('sharpen', params);
    };
    /**
     * Adds blur transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#blur
     * @param {(BlurParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.blur = function (params) {
        return this.addTask('blur', params);
    };
    /**
     * Adds blackwhite transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#blackwhite
     * @param {(BlackwhiteParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.blackwhite = function (params) {
        return this.addTask('blackwhite', params);
    };
    /**
     * Adds sepia transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#sepia
     * @param {(SepiaParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.sepia = function (params) {
        return this.addTask('sepia', params);
    };
    /**
     * Adds pixelate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pixelate
     * @param {(PixelateParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.pixelate = function (params) {
        return this.addTask('pixelate', params);
    };
    /**
     * Adds oilpaint transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#oil-paint
     * @param {(OilPaintParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.oilPaint = function (params) {
        return this.addTask('oil_paint', params);
    };
    /**
     * Adds modulate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#modulate
     * @param {(ModulateParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.modulate = function (params) {
        return this.addTask('modulate', params);
    };
    /**
     * Adds partial pixelate transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#partial-pixelate
     * @param {PartialPixelateParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.partialPixelate = function (params) {
        return this.addTask('partial_pixelate', params);
    };
    /**
     * Adds partial blur transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#partial-blur
     * @param {PartialBlurParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.partialBlur = function (params) {
        return this.addTask('partial_blur', params);
    };
    /**
     * Adds collage transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#collage
     * @param {CollageParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.collage = function (params) {
        return this.addTask('collage', params);
    };
    /**
     * Adds upscale transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#upscale
     * @param {(UpscaleParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.upscale = function (params) {
        return this.addTask('upscale', params);
    };
    /**
     * Adds ascii transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#ascii
     * @param {(AsciiParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.ascii = function (params) {
        return this.addTask('ascii', params);
    };
    /**
     * Adds quality transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#quality
     * @param {QualityParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.quality = function (params) {
        return this.addTask('quality', params);
    };
    /**
     * Adds security transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#security
     * @param {SecurityParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.security = function (params) {
        return this.addTask('security', params);
    };
    /**
     * Adds output transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#output
     * @param {OutputParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.output = function (params) {
        return this.addTask('output', params);
    };
    /**
     * Adds video convert transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#video-convert
     * @param {VideoConvertParams} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.videoConvert = function (params) {
        return this.addTask('video_convert', params);
    };
    /**
     * Adds URLScreenshot transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#urlscreenshot
     * @param {(URLScreenshotParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.URLScreenshot = function (params) {
        return this.addTask('urlscreenshot', params);
    };
    /**
     * Adds pdfinfo transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pdfinfo
     * @param {(PdfInfoParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.PDFInfo = function (params) {
        return this.addTask('pdfinfo', params);
    };
    /**
     * Adds pdfconvert transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#pdfconvert
     * @param {(PdfConvertParams | boolean)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.PDFConvert = function (params) {
        return this.addTask('pdfconvert', params);
    };
    /**
     * Adds fallback transformation
     *
     * @see https://www.filestack.com/docs/api/processing/#fallback
     * @param {(FallbackParams)} params
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.fallback = function (params) {
        return this.addTask('fallback', params);
    };
    /**
     * Add zip transformation which create a zip package on files
     * used on actual context
     *
     * @see https://www.filestack.com/docs/api/processing/#zip
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.zip = function () {
        return this.addTask('zip', true);
    };
    /**
     * Add task which minify a css file
     *
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.minifyCss = function (params) {
        return this.addTask('minify_css', params);
    };
    /**
     * Add task which minify a javascript file.
     * For better handling of 'targets' param, use with b64 flag enabled.
     *
     * @returns this
     * @memberof Filelink
     */
    Filelink.prototype.minifyJs = function (params) {
        return this.addTask('minify_js', params);
    };
    /**
     * Checks if source is external
     *
     * @private
     * @returns {boolean}
     * @memberof Filelink
     */
    Filelink.prototype.isSourceExternal = function () {
        if (!this.source) {
            throw new filestack_error_1.FilestackError('Source not Set');
        }
        var toTest = Array.isArray(this.source) ? this.source : [this.source];
        for (var i in toTest) {
            /* istanbul ignore next */
            if (!toTest.hasOwnProperty(i)) {
                continue;
            }
            if (toTest[i].indexOf('src:') === 0 || (toTest[i].indexOf('http') === 0 && toTest[i].indexOf('filestackcontent') === -1)) {
                return true;
            }
        }
        return false;
    };
    /**
     * Validate every task against schema
     *
     * @private
     * @param {object[]} transformations - object which contain all transformations
     * @returns {void}
     * @memberof Filelink
     */
    Filelink.prototype.validateTasks = function (transformations) {
        var res = Filelink.validator(this.arrayToObject(transformations, 'name', 'params'));
        if (res.errors.length) {
            throw new filestack_error_1.FilestackError("Params validation error", res.errors, filestack_error_1.FilestackErrorType.VALIDATION);
        }
        return;
    };
    /**
     * Returns correct cdn url with cname support
     *
     * @private
     * @returns {string}
     * @memberof Filelink
     */
    Filelink.prototype.getCdnHost = function () {
        var urls = Object.assign({}, config_1.config.urls);
        if (this.customDomain) {
            urls.cdnUrl = this.customDomain;
        }
        urls = (0, utils_1.resolveHost)(urls, this.cname);
        return urls.cdnUrl;
    };
    /**
     * Returns applied transformations as string
     *
     * @private
     * @returns {string}
     * @memberof Filelink
     */
    Filelink.prototype.generateTransformString = function () {
        var _this = this;
        var transforms = [];
        this.transforms.forEach(function (el) {
            transforms.push(_this.optionToString(el.name, el.params));
        });
        return transforms.join('/');
    };
    /**
     * Flatten transformation option to string
     *
     * @private
     * @example {resize:{width: 100,height: 200}} => resize=width:100,height:200
     * @param key - option key
     * @param values - option params
     */
    Filelink.prototype.optionToString = function (key, values) {
        var _this = this;
        var optionsString = [];
        if (typeof values === 'undefined') {
            return key;
        }
        // if we just want to enable feature
        if (typeof values === 'boolean') {
            if (!values && key === 'cache') {
                return 'cache=false';
            }
            return key;
        }
        Object.keys(values).forEach(function (i) {
            if (Array.isArray(values[i])) {
                optionsString.push("".concat(i, ":").concat(_this.arrayToString(values[i])));
                return;
            }
            optionsString.push("".concat(i, ":").concat(_this.escapeValue(values[i])));
        });
        return "".concat(key, "=").concat(optionsString.join(','));
    };
    /**
     * Escape params values
     *
     * @private
     * @param {string} value
     * @returns {string}
     * @memberof Filelink
     */
    Filelink.prototype.escapeValue = function (value) {
        if (typeof value !== 'string') {
            return value;
        }
        if (value.indexOf('/') > -1 || value.indexOf(',') > -1) {
            return "\"".concat(value, "\"");
        }
        return value;
    };
    /**
     * Converts nested arrays to string
     *
     * @private
     * @example [1,2, [2,3]] => "[1,2, [2,3]]"
     * @param arr - any array
     */
    Filelink.prototype.arrayToString = function (arr) {
        var _this = this;
        var toReturn = arr.map(function (el) {
            if (Array.isArray(el)) {
                return _this.arrayToString(el);
            }
            return _this.escapeValue(el);
        });
        return "[".concat(toReturn, "]");
    };
    /**
     * Validator instance
     *
     * @private
     * @memberof Filelink
     */
    Filelink.validator = (0, validator_1.getValidator)(transforms_schema_1.TransformSchema);
    return Filelink;
}());
exports.Filelink = Filelink;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvZmlsZWxpbmsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRzs7OztBQUVILHNDQUFxQztBQUNyQyxtRUFBZ0U7QUFDaEUsbURBQXFEO0FBQ3JELGlDQUEyQztBQUMzQyx3REFBMEU7QUFDMUUsd0RBQTBCO0FBRTFCLElBQU0sS0FBSyxHQUFHLElBQUEsZUFBSyxFQUFDLGFBQWEsQ0FBQyxDQUFDO0FBRW5DLElBQVksS0FRWDtBQVJELFdBQVksS0FBSztJQUNmLHNCQUFhLENBQUE7SUFDYix3QkFBZSxDQUFBO0lBQ2YsMEJBQWlCLENBQUE7SUFDakIsMEJBQWlCLENBQUE7SUFDakIsb0JBQVcsQ0FBQTtJQUNYLHdCQUFlLENBQUE7SUFDZiwwQkFBaUIsQ0FBQTtBQUNuQixDQUFDLEVBUlcsS0FBSyxHQUFMLGFBQUssS0FBTCxhQUFLLFFBUWhCO0FBT0Q7O0dBRUc7QUFDSCxJQUFZLFVBS1g7QUFMRCxXQUFZLFVBQVU7SUFDcEIsMkJBQWEsQ0FBQTtJQUNiLDJCQUFhLENBQUE7SUFDYiw2QkFBZSxDQUFBO0lBQ2YseUJBQVcsQ0FBQTtBQUNiLENBQUMsRUFMVyxVQUFVLEdBQVYsa0JBQVUsS0FBVixrQkFBVSxRQUtyQjtBQUVEOztHQUVHO0FBQ0gsSUFBWSxRQUdYO0FBSEQsV0FBWSxRQUFRO0lBQ2xCLDZCQUFpQixDQUFBO0lBQ2pCLGlDQUFxQixDQUFBO0FBQ3ZCLENBQUMsRUFIVyxRQUFRLEdBQVIsZ0JBQVEsS0FBUixnQkFBUSxRQUduQjtBQUVEOztHQUVHO0FBQ0gsSUFBWSxTQUdYO0FBSEQsV0FBWSxTQUFTO0lBQ25CLDBCQUFhLENBQUE7SUFDYiwwQkFBYSxDQUFBO0FBQ2YsQ0FBQyxFQUhXLFNBQVMsR0FBVCxpQkFBUyxLQUFULGlCQUFTLFFBR3BCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFNBS1g7QUFMRCxXQUFZLFNBQVM7SUFDbkIsMEJBQWEsQ0FBQTtJQUNiLHdCQUFXLENBQUE7SUFDWCw4QkFBaUIsQ0FBQTtJQUNqQiwwQkFBYSxDQUFBO0FBQ2YsQ0FBQyxFQUxXLFNBQVMsR0FBVCxpQkFBUyxLQUFULGlCQUFTLFFBS3BCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFNBR1g7QUFIRCxXQUFZLFNBQVM7SUFDbkIsZ0NBQW1CLENBQUE7SUFDbkIsNEJBQWUsQ0FBQTtBQUNqQixDQUFDLEVBSFcsU0FBUyxHQUFULGlCQUFTLEtBQVQsaUJBQVMsUUFHcEI7QUFFRDs7R0FFRztBQUNILElBQVksY0FJWDtBQUpELFdBQVksY0FBYztJQUN4Qiw2QkFBVyxDQUFBO0lBQ1gsK0JBQWEsQ0FBQTtJQUNiLGlDQUFlLENBQUE7QUFDakIsQ0FBQyxFQUpXLGNBQWMsR0FBZCxzQkFBYyxLQUFkLHNCQUFjLFFBSXpCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLGFBSVg7QUFKRCxXQUFZLGFBQWE7SUFDdkIsZ0NBQWUsQ0FBQTtJQUNmLDhCQUFhLENBQUE7SUFDYiw4QkFBYSxDQUFBO0FBQ2YsQ0FBQyxFQUpXLGFBQWEsR0FBYixxQkFBYSxLQUFiLHFCQUFhLFFBSXhCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLHNCQU9YO0FBUEQsV0FBWSxzQkFBc0I7SUFDaEMscUNBQVcsQ0FBQTtJQUNYLDJDQUFpQixDQUFBO0lBQ2pCLDJDQUFpQixDQUFBO0lBQ2pCLHVDQUFhLENBQUE7SUFDYiwyQ0FBaUIsQ0FBQTtJQUNqQix5Q0FBZSxDQUFBO0FBQ2pCLENBQUMsRUFQVyxzQkFBc0IsR0FBdEIsOEJBQXNCLEtBQXRCLDhCQUFzQixRQU9qQztBQUVEOztHQUVHO0FBQ0gsSUFBWSxhQUdYO0FBSEQsV0FBWSxhQUFhO0lBQ3ZCLDhCQUFhLENBQUE7SUFDYiw4QkFBYSxDQUFBO0FBQ2YsQ0FBQyxFQUhXLGFBQWEsR0FBYixxQkFBYSxLQUFiLHFCQUFhLFFBR3hCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFVBU1g7QUFURCxXQUFZLFVBQVU7SUFDcEIsdUNBQXlCLENBQUE7SUFDekIscUNBQXVCLENBQUE7SUFDdkIsdUNBQXlCLENBQUE7SUFDekIsaUNBQW1CLENBQUE7SUFDbkIscUNBQXVCLENBQUE7SUFDdkIseUJBQVcsQ0FBQTtJQUNYLHlCQUFXLENBQUE7SUFDWCwyQkFBYSxDQUFBO0FBQ2YsQ0FBQyxFQVRXLFVBQVUsR0FBVixrQkFBVSxLQUFWLGtCQUFVLFFBU3JCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFVBYVg7QUFiRCxXQUFZLFVBQVU7SUFDcEIsMkJBQWEsQ0FBQTtJQUNiLGlDQUFtQixDQUFBO0lBQ25CLDJCQUFhLENBQUE7SUFDYixpQ0FBcUIsQ0FBQTtJQUNyQix5QkFBVyxDQUFBO0lBQ1gsK0JBQW1CLENBQUE7SUFDbkIseUNBQTZCLENBQUE7SUFDN0IseUJBQVcsQ0FBQTtJQUNYLHlCQUFXLENBQUE7SUFDWCx5QkFBVyxDQUFBO0lBQ1gseUJBQVcsQ0FBQTtJQUNYLHVDQUF5QixDQUFBO0FBQzNCLENBQUMsRUFiVyxVQUFVLEdBQVYsa0JBQVUsS0FBVixrQkFBVSxRQWFyQjtBQUVELElBQVksa0JBR1g7QUFIRCxXQUFZLGtCQUFrQjtJQUM1Qix5Q0FBbUIsQ0FBQTtJQUNuQix1Q0FBaUIsQ0FBQTtBQUNuQixDQUFDLEVBSFcsa0JBQWtCLEdBQWxCLDBCQUFrQixLQUFsQiwwQkFBa0IsUUFHN0I7QUFFRCxJQUFZLGlCQUdYO0FBSEQsV0FBWSxpQkFBaUI7SUFDM0IsZ0NBQVcsQ0FBQTtJQUNYLHNDQUFpQixDQUFBO0FBQ25CLENBQUMsRUFIVyxpQkFBaUIsR0FBakIseUJBQWlCLEtBQWpCLHlCQUFpQixRQUc1QjtBQUVELElBQVksd0JBR1g7QUFIRCxXQUFZLHdCQUF3QjtJQUNsQyxpREFBcUIsQ0FBQTtJQUNyQixtREFBdUIsQ0FBQTtBQUN6QixDQUFDLEVBSFcsd0JBQXdCLEdBQXhCLGdDQUF3QixLQUF4QixnQ0FBd0IsUUFHbkM7QUFFRDs7R0FFRztBQUNILElBQVksU0FNWDtBQU5ELFdBQVksU0FBUztJQUNuQixzQkFBUyxDQUFBO0lBQ1QsNEJBQWUsQ0FBQTtJQUNmLHdCQUFXLENBQUE7SUFDWCxvQ0FBdUIsQ0FBQTtJQUN2QixnQ0FBbUIsQ0FBQTtBQUNyQixDQUFDLEVBTlcsU0FBUyxHQUFULGlCQUFTLEtBQVQsaUJBQVMsUUFNcEI7QUFFRCxJQUFZLFdBR1g7QUFIRCxXQUFZLFdBQVc7SUFDckIsa0NBQW1CLENBQUE7SUFDbkIsZ0NBQWlCLENBQUE7QUFDbkIsQ0FBQyxFQUhXLFdBQVcsR0FBWCxtQkFBVyxLQUFYLG1CQUFXLFFBR3RCO0FBRUQsSUFBWSxlQU1YO0FBTkQsV0FBWSxlQUFlO0lBQ3pCLHdDQUFxQixDQUFBO0lBQ3JCLDBDQUF1QixDQUFBO0lBQ3ZCLDBDQUF1QixDQUFBO0lBQ3ZCLDhCQUFXLENBQUE7SUFDWCxnQ0FBYSxDQUFBO0FBQ2YsQ0FBQyxFQU5XLGVBQWUsR0FBZix1QkFBZSxLQUFmLHVCQUFlLFFBTTFCO0FBNlJELElBQVksYUFVWDtBQVZELFdBQVksYUFBYTtJQUN2Qiw4QkFBYSxDQUFBO0lBQ2IsZ0NBQWUsQ0FBQTtJQUNmLHNDQUFxQixDQUFBO0lBQ3JCLCtDQUE4QixDQUFBO0lBQzlCLHFDQUFvQixDQUFBO0lBQ3BCLHVDQUFzQixDQUFBO0lBQ3RCLHFDQUFvQixDQUFBO0lBQ3BCLG1DQUFrQixDQUFBO0lBQ2xCLHdDQUF1QixDQUFBO0FBQ3pCLENBQUMsRUFWVyxhQUFhLEdBQWIscUJBQWEsS0FBYixxQkFBYSxRQVV4QjtBQXFDRCxJQUFNLFlBQVksR0FBRyxtQ0FBbUMsQ0FBQztBQUV6RDs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSDtJQXFFRTs7Ozs7O09BTUc7SUFDSCxrQkFBWSxNQUF5QixFQUFFLE1BQWU7UUFuRXREOzs7OztXQUtHO1FBQ0ssZUFBVSxHQUFHLEVBQUUsQ0FBQztRQW1CeEI7Ozs7OztXQU1HO1FBQ0ssUUFBRyxHQUFZLEtBQUssQ0FBQztRQUU3Qjs7Ozs7V0FLRztRQUNLLGlCQUFZLEdBQVksSUFBSSxDQUFDO1FBby9CckM7Ozs7OztXQU1HO1FBQ0ssa0JBQWEsR0FBRyxVQUFDLEtBQW9CLEVBQUUsT0FBZSxFQUFFLE9BQWU7WUFBdEQsc0JBQUEsRUFBQSxVQUFvQjtZQUMzQyxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBQyxHQUFHLEVBQUUsSUFBSTtnQkFDNUIsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDbkMsT0FBTyxHQUFHLENBQUM7WUFDYixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDVCxDQUFDLENBQUE7UUFwK0JDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILDRCQUFTLEdBQVQsVUFBVSxJQUFhO1FBQ3JCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILGtDQUFlLEdBQWYsVUFBZ0IsSUFBYTtRQUMzQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUN6QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCwyQkFBUSxHQUFSLFVBQVMsS0FBYTtRQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxrQ0FBZSxHQUFmLFVBQWdCLE1BQWM7UUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7UUFDM0IsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsNEJBQVMsR0FBVCxVQUFVLE1BQXlCO1FBQ2pDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBRXJCLElBQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRTNDLEtBQUssQ0FBQyxpQkFBVSxNQUFNLDRCQUFrQixVQUFVLENBQUUsQ0FBQyxDQUFDO1FBRXRELElBQUksVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUM5QixNQUFNLElBQUksZ0NBQWMsQ0FBQyx1REFBdUQsQ0FBQyxDQUFDO1NBQ25GO1FBRUQsSUFBSSxDQUFDLFVBQVUsSUFBSSxPQUFPLElBQUksQ0FBQyxNQUFNLEtBQUssUUFBUSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUN2SSxNQUFNLElBQUksZ0NBQWMsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1NBQy9EO0lBQ0gsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsc0NBQW1CLEdBQW5CO1FBQ0UsT0FBTyxtQ0FBZSxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILHFDQUFrQixHQUFsQjtRQUNFLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNyQixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUNyQztRQUNELE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCwyQkFBUSxHQUFSO1FBQ0UsSUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7UUFFbEMsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQ3JDO1FBRUQsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDN0I7UUFFRCxJQUFJLGdCQUFnQixHQUFHLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO1FBRXRELElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFFekIsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1osSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzlCLGdCQUFnQixHQUFHLGNBQU8sSUFBQSxXQUFHLEVBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUUsQ0FBQzthQUN4RTtZQUVELElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDekIsTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDckM7WUFFRCxNQUFNLEdBQUcsZ0JBQVMsSUFBQSxXQUFHLEVBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFFLENBQUM7U0FDdkM7YUFBTTtZQUNMLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDekIsTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDckM7aUJBQU07Z0JBQ0wsTUFBTSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDbkM7U0FDRjtRQUVELElBQUksZ0JBQWdCLENBQUMsTUFBTSxFQUFFO1lBQzNCLFNBQVMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUNsQztRQUVELFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkIsT0FBTyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsMEJBQU8sR0FBUCxVQUFRLElBQVksRUFBRSxNQUFPO1FBQzNCLElBQUEsZUFBSyxFQUFDLG9CQUFhLElBQUksb0JBQWlCLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFbEQsSUFBSSxJQUFJLEtBQUssT0FBTyxJQUFJLE9BQU8sTUFBTSxLQUFLLFNBQVMsRUFBRTtZQUNuRCxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUNYLE9BQU8sSUFBSSxDQUFDO2FBQ2I7aUJBQU07Z0JBQ0wsTUFBTSxHQUFHLFNBQVMsQ0FBQzthQUNwQjtTQUNGO2FBQU0sSUFBSSxPQUFPLE1BQU0sS0FBSyxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUNwRSxNQUFNLEdBQUcsU0FBUyxDQUFDO1NBQ3BCO1FBRUQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLE1BQUEsRUFBRSxNQUFNLFFBQUEsRUFBRSxDQUFDLENBQUM7UUFDdkMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILDJCQUFRLEdBQVI7UUFDRSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsd0JBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOztPQUVHO0lBRUg7Ozs7OztPQU1HO0lBQ0gsNEJBQVMsR0FBVDtRQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILHVCQUFJLEdBQUo7UUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCx1QkFBSSxHQUFKO1FBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsNEJBQVMsR0FBVDtRQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILDZCQUFVLEdBQVY7UUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCx1QkFBSSxHQUFKLFVBQUssTUFBNEI7UUFDL0IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsNEJBQVMsR0FBVCxVQUFVLE1BQXVCO1FBQy9CLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILDRCQUFTLEdBQVQsVUFBVSxNQUF1QjtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCwwQkFBTyxHQUFQLFVBQVEsTUFBc0I7UUFDNUIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLElBQUksSUFBSSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILHlCQUFNLEdBQU47UUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCw2QkFBVSxHQUFWO1FBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsMkJBQVEsR0FBUixVQUFTLE1BQXVCO1FBQzlCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCwyQkFBUSxHQUFSO1FBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsdUJBQUksR0FBSjtRQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILHNCQUFHLEdBQUg7UUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsMEJBQU8sR0FBUCxVQUFRLE1BQXVCO1FBQzdCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCx3QkFBSyxHQUFMLFVBQU0sTUFBOEI7UUFDbEMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILHdCQUFLLEdBQUwsVUFBTSxNQUE2QjtRQUNqQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gseUJBQU0sR0FBTixVQUFPLE1BQW9CO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCx1QkFBSSxHQUFKLFVBQUssTUFBa0I7UUFDckIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILHlCQUFNLEdBQU4sVUFBTyxNQUFvQjtRQUN6QixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsOEJBQVcsR0FBWCxVQUFZLE1BQW9DO1FBQzlDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCw0QkFBUyxHQUFULFVBQVUsTUFBdUI7UUFDL0IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILGdDQUFhLEdBQWIsVUFBYyxNQUEyQjtRQUN2QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCw0QkFBUyxHQUFULFVBQVUsTUFBdUI7UUFDL0IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILGlDQUFjLEdBQWQsVUFBZSxNQUF1QztRQUNwRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCwyQkFBUSxHQUFSLFVBQVMsTUFBaUM7UUFDeEMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILDJCQUFRLEdBQVIsVUFBUyxNQUFpQztRQUN4QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsNEJBQVMsR0FBVCxVQUFVLE1BQWtDO1FBQzFDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCx5QkFBTSxHQUFOLFVBQU8sTUFBK0I7UUFDcEMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILHlCQUFNLEdBQU4sVUFBTyxNQUErQjtRQUNwQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gseUJBQU0sR0FBTixVQUFPLE1BQStCO1FBQ3BDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCwwQkFBTyxHQUFQLFVBQVEsTUFBZ0M7UUFDdEMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILHVCQUFJLEdBQUosVUFBSyxNQUE2QjtRQUNoQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsNkJBQVUsR0FBVixVQUFXLE1BQW1DO1FBQzVDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCx3QkFBSyxHQUFMLFVBQU0sTUFBOEI7UUFDbEMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILDJCQUFRLEdBQVIsVUFBUyxNQUFpQztRQUN4QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsMkJBQVEsR0FBUixVQUFTLE1BQWlDO1FBQ3hDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCwyQkFBUSxHQUFSLFVBQVMsTUFBaUM7UUFDeEMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILGtDQUFlLEdBQWYsVUFBZ0IsTUFBNkI7UUFDM0MsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLGtCQUFrQixFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsOEJBQVcsR0FBWCxVQUFZLE1BQXlCO1FBQ25DLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCwwQkFBTyxHQUFQLFVBQVEsTUFBcUI7UUFDM0IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILDBCQUFPLEdBQVAsVUFBUSxNQUFnQztRQUN0QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsd0JBQUssR0FBTCxVQUFNLE1BQThCO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCwwQkFBTyxHQUFQLFVBQVEsTUFBcUI7UUFDM0IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILDJCQUFRLEdBQVIsVUFBUyxNQUFzQjtRQUM3QixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gseUJBQU0sR0FBTixVQUFPLE1BQW9CO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCwrQkFBWSxHQUFaLFVBQWEsTUFBMEI7UUFDckMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILGdDQUFhLEdBQWIsVUFBYyxNQUFzQztRQUNsRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsMEJBQU8sR0FBUCxVQUFRLE1BQWdDO1FBQ3RDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCw2QkFBVSxHQUFWLFVBQVcsTUFBbUM7UUFDNUMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILDJCQUFRLEdBQVIsVUFBUyxNQUFzQjtRQUM3QixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsc0JBQUcsR0FBSDtRQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsNEJBQVMsR0FBVCxVQUFVLE1BQXVCO1FBQy9CLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILDJCQUFRLEdBQVIsVUFBUyxNQUFzQjtRQUM3QixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSyxtQ0FBZ0IsR0FBeEI7UUFDRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNoQixNQUFNLElBQUksZ0NBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQzVDO1FBRUQsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3RFLEtBQUssSUFBSSxDQUFDLElBQUksTUFBTSxFQUFFO1lBQ3BCLDBCQUEwQjtZQUMxQixJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDN0IsU0FBUzthQUNWO1lBRUQsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUN4SCxPQUFPLElBQUksQ0FBQzthQUNiO1NBQ0Y7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0ssZ0NBQWEsR0FBckIsVUFBc0IsZUFBeUI7UUFDN0MsSUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN0RixJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO1lBQ3JCLE1BQU0sSUFBSSxnQ0FBYyxDQUFDLHlCQUF5QixFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsb0NBQWtCLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDaEc7UUFFRCxPQUFPO0lBQ1QsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNLLDZCQUFVLEdBQWxCO1FBQ0UsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsZUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTFDLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNyQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7U0FDakM7UUFFRCxJQUFJLEdBQUcsSUFBQSxtQkFBVyxFQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFckMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSywwQ0FBdUIsR0FBL0I7UUFBQSxpQkFRQztRQVBDLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUVwQixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFBLEVBQUU7WUFDeEIsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSyxpQ0FBYyxHQUF0QixVQUF1QixHQUFXLEVBQUUsTUFBVztRQUEvQyxpQkF5QkM7UUF4QkMsSUFBSSxhQUFhLEdBQWEsRUFBRSxDQUFDO1FBQ2pDLElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFO1lBQ2pDLE9BQU8sR0FBRyxDQUFDO1NBQ1o7UUFFRCxvQ0FBb0M7UUFDcEMsSUFBSSxPQUFPLE1BQU0sS0FBSyxTQUFTLEVBQUU7WUFDL0IsSUFBSSxDQUFDLE1BQU0sSUFBSSxHQUFHLEtBQUssT0FBTyxFQUFFO2dCQUM5QixPQUFPLGFBQWEsQ0FBQzthQUN0QjtZQUVELE9BQU8sR0FBRyxDQUFDO1NBQ1o7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLENBQUM7WUFDM0IsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUM1QixhQUFhLENBQUMsSUFBSSxDQUFDLFVBQUcsQ0FBQyxjQUFJLEtBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUUsQ0FBQyxDQUFDO2dCQUM1RCxPQUFPO2FBQ1I7WUFFRCxhQUFhLENBQUMsSUFBSSxDQUFDLFVBQUcsQ0FBQyxjQUFJLEtBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUUsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxVQUFHLEdBQUcsY0FBSSxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFFLENBQUM7SUFDN0MsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSyw4QkFBVyxHQUFuQixVQUFvQixLQUFhO1FBQy9CLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO1lBQzdCLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUN0RCxPQUFPLFlBQUksS0FBSyxPQUFHLENBQUM7U0FDckI7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSyxnQ0FBYSxHQUFyQixVQUFzQixHQUFVO1FBQWhDLGlCQVVDO1FBVEMsSUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFBLEVBQUU7WUFDekIsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO2dCQUNyQixPQUFPLEtBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDL0I7WUFFRCxPQUFPLEtBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDOUIsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLFdBQUksUUFBUSxNQUFHLENBQUM7SUFDekIsQ0FBQztJQWxpQ0Q7Ozs7O09BS0c7SUFDWSxrQkFBUyxHQUFHLElBQUEsd0JBQVksRUFBQyxtQ0FBZSxDQUFDLENBQUM7SUEyaUMzRCxlQUFDO0NBbGpDRCxBQWtqQ0MsSUFBQTtBQWxqQ1ksNEJBQVEiLCJmaWxlIjoibGliL2ZpbGVsaW5rLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxOCBieSBGaWxlc3RhY2tcbiAqIFNvbWUgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLy4uL2NvbmZpZyc7XG5pbXBvcnQgeyBUcmFuc2Zvcm1TY2hlbWEgfSBmcm9tICcuLy4uL3NjaGVtYS90cmFuc2Zvcm1zLnNjaGVtYSc7XG5pbXBvcnQgeyBnZXRWYWxpZGF0b3IgfSBmcm9tICcuLy4uL3NjaGVtYS92YWxpZGF0b3InO1xuaW1wb3J0IHsgcmVzb2x2ZUhvc3QsIGI2NCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgRmlsZXN0YWNrRXJyb3IsIEZpbGVzdGFja0Vycm9yVHlwZSB9IGZyb20gJy4vLi4vZmlsZXN0YWNrX2Vycm9yJztcbmltcG9ydCBEZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5cbmNvbnN0IGRlYnVnID0gRGVidWcoJ2ZzOmZpbGVsaW5rJyk7XG5cbmV4cG9ydCBlbnVtIEFsaWduIHtcbiAgbGVmdCA9ICdsZWZ0JyxcbiAgcmlnaHQgPSAncmlnaHQnLFxuICBjZW50ZXIgPSAnY2VudGVyJyxcbiAgYm90dG9tID0gJ2JvdHRvbScsXG4gIHRvcCA9ICd0b3AnLFxuICBmYWNlcyA9ICdmYWNlcycsXG4gIG1pZGRsZSA9ICdtaWRkbGUnLFxufVxuXG4vKipcbiAqIEFsaWduXG4gKi9cbmV4cG9ydCB0eXBlIEFsaWduT3B0aW9ucyA9IEFsaWduIHwgW0FsaWduLnRvcCB8IEFsaWduLm1pZGRsZSB8IEFsaWduLmJvdHRvbSwgQWxpZ24ubGVmdCB8IEFsaWduLmNlbnRlciB8IEFsaWduLnJpZ2h0XTtcblxuLyoqXG4gKiBGaXQgZW51bVxuICovXG5leHBvcnQgZW51bSBGaXRPcHRpb25zIHtcbiAgY2xpcCA9ICdjbGlwJyxcbiAgY3JvcCA9ICdjcm9wJyxcbiAgc2NhbGUgPSAnc2NhbGUnLFxuICBtYXggPSAnbWF4Jyxcbn1cblxuLyoqXG4gKiBCbHVyIGVudW1cbiAqL1xuZXhwb3J0IGVudW0gQmx1ck1vZGUge1xuICBsaW5lYXIgPSAnbGluZWFyJyxcbiAgZ2F1c3NpYW4gPSAnZ2F1c3NpYW4nLFxufVxuXG4vKipcbiAqIFNoYXBlcyBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIFNoYXBlVHlwZSB7XG4gIG92YWwgPSAnb3ZhbCcsXG4gIHJlY3QgPSAncmVjdCcsXG59XG5cbi8qKlxuICogTm9pc2UgdHlwZSBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIE5vaXNlVHlwZSB7XG4gIG5vbmUgPSAnbm9uZScsXG4gIGxvdyA9ICdsb3cnLFxuICBtZWRpdW0gPSAnbWVkaXVtJyxcbiAgaGlnaCA9ICdoaWdoJyxcbn1cblxuLyoqXG4gKiBTdHlsZSB0eXBlIGVudW1cbiAqL1xuZXhwb3J0IGVudW0gU3R5bGVUeXBlIHtcbiAgYXJ0d29yayA9ICdhcnR3b3JrJyxcbiAgcGhvdG8gPSAncGhvdG8nLFxufVxuXG4vKipcbiAqIENvbG9yIHNwYWNlIGVudW1cbiAqL1xuZXhwb3J0IGVudW0gQ29sb3JzcGFjZVR5cGUge1xuICBSR0IgPSAnUkdCJyxcbiAgQ01ZSyA9ICdDTVlLJyxcbiAgSW5wdXQgPSAnSW5wdXQnLFxufVxuXG4vKipcbiAqIENyb3AgZmFjZXMgb3B0aW9ucyBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIENyb3BmYWNlc1R5cGUge1xuICB0aHVtYiA9ICd0aHVtYicsXG4gIGNyb3AgPSAnY3JvcCcsXG4gIGZpbGwgPSAnZmlsbCcsXG59XG5cbi8qKlxuICogV2F0ZXJtYXJrIHBvc3Rpb24gb3B0aW9ucyBlbnVtXG4gKi9cbmV4cG9ydCBlbnVtIEltYWdlV2F0ZXJtYXJrUG9zaXRpb24ge1xuICB0b3AgPSAndG9wJyxcbiAgbWlkZGxlID0gJ21pZGRsZScsXG4gIGJvdHRvbSA9ICdib3R0b20nLFxuICBsZWZ0ID0gJ2xlZnQnLFxuICBjZW50ZXIgPSAnY2VudGVyJyxcbiAgcmlnaHQgPSAncmlnaHQnLFxufVxuXG4vKipcbiAqIFNtYXJ0Q3JvcCBvcHRpb25zIGVudW1cbiAqL1xuZXhwb3J0IGVudW0gU21hcnRDcm9wTW9kZSB7XG4gIGZhY2UgPSAnZmFjZScsXG4gIGF1dG8gPSAnYXV0bycsXG59XG5cbi8qKlxuICogQ29udmVydCB0byBmb3JtYXRcbiAqL1xuZXhwb3J0IGVudW0gQXVkaW9UeXBlcyB7XG4gIGxpYm1wM2xhbWUgPSAnbGlibXAzbGFtZScsXG4gIGxpYnZvcmJpcyA9ICdsaWJ2b3JiaXMnLFxuICBsaWJmZGtfYWFjID0gJ2xpYmZka19hYWMnLFxuICBkaWJfYWMzID0gJ2RpYl9hYzMnLFxuICBwY21fczE2bGUgPSAncGNtX3MxNmxlJyxcbiAgbXAyID0gJ21wMicsXG4gIGFjMyA9ICdhYzMnLFxuICBlYWMzID0gJ2VhYzMnLFxufVxuXG4vKipcbiAqIENvbnZlcnQgdG8gZm9ybWF0XG4gKi9cbmV4cG9ydCBlbnVtIFZpZGVvVHlwZXMge1xuICBoMjY0ID0gJ2gyNjQnLFxuICBoMjY0X2hpID0gJ2gyNjQuaGknLFxuICB3ZWJtID0gJ3dlYm0nLFxuICAnd2VibS1oaScgPSAnd2VibS5oaScsXG4gIG9nZyA9ICdvZ2cnLFxuICAnb2dnLWhpJyA9ICdvZ2cuaGknLFxuICAnaGxzLXZhcmlhbnQnID0gJ2hscy52YXJpYW50JyxcbiAgbXAzID0gJ21wMycsXG4gIG9nYSA9ICdvZ2EnLFxuICBtNGEgPSAnbTRhJyxcbiAgYWFjID0gJ2FhYycsXG4gIGhscyA9ICdobHMudmFyaWFudC5hdWRpbycsXG59XG5cbmV4cG9ydCBlbnVtIFVSTFNjcmVlbnNob3RBZ2VudCB7XG4gIGRlc2t0b3AgPSAnZGVza3RvcCcsXG4gIG1vYmlsZSA9ICdtb2JpbGUnLFxufVxuXG5leHBvcnQgZW51bSBVUkxTY3JlZW5zaG90TW9kZSB7XG4gIGFsbCA9ICdhbGwnLFxuICB3aW5kb3cgPSAnd2luZG93Jyxcbn1cblxuZXhwb3J0IGVudW0gVVJMU2NyZWVuc2hvdE9yaWVudGF0aW9uIHtcbiAgcG9ydHJhaXQgPSAncG9ydHJhaXQnLFxuICBsYW5kc2NhcGUgPSAnbGFuZHNjYXBlJyxcbn1cblxuLyoqXG4gKiBWaWRlbyBzdG9yYWdlIGxvY2F0aW9uXG4gKi9cbmV4cG9ydCBlbnVtIExvY2F0aW9ucyB7XG4gIHMzID0gJ3MzJyxcbiAgYXp1cmUgPSAnYXp1cmUnLFxuICBnY3MgPSAnZ2NzJyxcbiAgcmFja3NwYWNlID0gJ3JhY2tzcGFjZScsXG4gIGRyb3Bib3ggPSAnZHJvcGJveCcsXG59XG5cbmV4cG9ydCBlbnVtIFZpZGVvQWNjZXNzIHtcbiAgcHJpdmF0ZSA9ICdwcml2YXRlJyxcbiAgcHVibGljID0gJ3B1YmxpYycsXG59XG5cbmV4cG9ydCBlbnVtIFZpZGVvQWNjZXNzTW9kZSB7XG4gIHByZXNlcnZlID0gJ3ByZXNlcnZlJyxcbiAgY29uc3RyYWluID0gJ2NvbnN0cmFpbicsXG4gIGxldHRlcmJveCA9ICdsZXR0ZXJib3gnLFxuICBwYWQgPSAncGFkJyxcbiAgY3JvcCA9ICdjcm9wJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9yZUJhc2VQYXJhbXMge1xuICBsb2NhdGlvbj86IHN0cmluZztcbiAgcGF0aD86IHN0cmluZztcbiAgY29udGFpbmVyPzogc3RyaW5nO1xuICByZWdpb24/OiBzdHJpbmc7XG4gIGFjY2Vzcz86IHN0cmluZztcbiAgZGlzYWJsZVN0b3JhZ2VLZXk/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEF2YWlsYWJsZSBvcHRpb25zIGZvciBzdG9yZSB0cmFuc2Zvcm1hdGlvbnNcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0b3JlUGFyYW1zXG4gKi9cbmV4cG9ydCB0eXBlIFN0b3JlUGFyYW1zID0gU3RvcmVCYXNlUGFyYW1zICYge1xuICBmaWxlbmFtZT86IHN0cmluZztcbiAgYmFzZTY0ZGVjb2RlPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uUGFyYW1zIHtcbiAgZGVsYXk/OiBudW1iZXI7XG4gIGxvb3A/OiBudW1iZXI7XG4gIHdpZHRoPzogbnVtYmVyO1xuICBoZWlnaHQ/OiBudW1iZXI7XG4gIGZpdD86IEZpdE9wdGlvbnM7XG4gIGFsaWduPzogQWxpZ25PcHRpb25zO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc2l6ZVBhcmFtcyB7XG4gIHdpZHRoPzogbnVtYmVyO1xuICBoZWlnaHQ/OiBudW1iZXI7XG4gIGZpdD86IEZpdE9wdGlvbnM7XG4gIGFsaWduPzogQWxpZ25PcHRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyb3BQYXJhbXMge1xuICBkaW06IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJvdGF0ZVBhcmFtcyB7XG4gIGRlZzogbnVtYmVyIHwgc3RyaW5nO1xuICBjb2xvcj86IHN0cmluZztcbiAgYmFja2dyb3VuZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXRlY3RGYWNlc1BhcmFtcyB7XG4gIG1pbnNpemU/OiBudW1iZXI7XG4gIG1heHNpemU/OiBudW1iZXI7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBleHBvcnQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyb3BGYWNlc1BhcmFtcyB7XG4gIG1vZGU/OiBDcm9wZmFjZXNUeXBlO1xuICB3aWR0aD86IG51bWJlcjtcbiAgaGVpZ2h0PzogbnVtYmVyO1xuICBmYWNlcz86IG51bWJlciB8IHN0cmluZztcbiAgYnVmZmVyPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpeGVsYXRlRmFjZXNQYXJhbXMge1xuICBmYWNlcz86IG51bWJlciB8IHN0cmluZztcbiAgbWluc2l6ZT86IG51bWJlcjtcbiAgbWF4c2l6ZT86IG51bWJlcjtcbiAgYnVmZmVyPzogbnVtYmVyO1xuICBhbW91bnQ/OiBudW1iZXI7XG4gIGJsdXI/OiBudW1iZXI7XG4gIHR5cGU/OiBTaGFwZVR5cGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmx1ckZhY2VzUGFyYW1zIHtcbiAgZmFjZXM/OiBudW1iZXIgfCBzdHJpbmc7XG4gIG1pbnNpemU/OiBudW1iZXI7XG4gIG1heHNpemU/OiBudW1iZXI7XG4gIGJ1ZmZlcj86IG51bWJlcjtcbiAgYW1vdW50PzogbnVtYmVyO1xuICBibHVyPzogbnVtYmVyO1xuICB0eXBlPzogU2hhcGVUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJvdW5kZWRDb3JuZXJzUGFyYW1zIHtcbiAgcmFkaXVzPzogbnVtYmVyO1xuICBibHVyPzogbnVtYmVyO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZpZ25ldHRlUGFyYW1zIHtcbiAgYW1vdW50PzogbnVtYmVyO1xuICBibHVybW9kZT86IEJsdXJNb2RlO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvbGFyb2lkUGFyYW1zIHtcbiAgY29sb3I/OiBzdHJpbmc7XG4gIHJvdGF0ZT86IG51bWJlcjtcbiAgYmFja2dyb3VuZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb3JuRWRnZXNQYXJhbXMge1xuICBzcHJlYWQ/OiBbbnVtYmVyLCBudW1iZXJdO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNoYWRvd1BhcmFtcyB7XG4gIGJsdXI/OiBudW1iZXI7XG4gIG9wYWNpdHk/OiBudW1iZXI7XG4gIHZlY3Rvcj86IFtudW1iZXIsIG51bWJlcl07XG4gIGNvbG9yPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpcmNsZVBhcmFtcyB7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm9yZGVyUGFyYW1zIHtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXByZXNzUGFyYW1zIHtcbiAgbWV0YWRhdGE/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdhdGVybWFya1BhcmFtcyB7XG4gIGZpbGU6IHN0cmluZztcbiAgc2l6ZT86IG51bWJlcjtcbiAgcG9zaXRpb24/OiBJbWFnZVdhdGVybWFya1Bvc2l0aW9uIHwgSW1hZ2VXYXRlcm1hcmtQb3NpdGlvbltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzaXZlSnBnUGFyYW1zIHtcbiAgcXVhbGl0eTogbnVtYmVyO1xuICBtZXRhZGF0YTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTbWFydENyb3BQYXJhbXMge1xuICBtb2RlOiBTbWFydENyb3BNb2RlO1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaGFycGVuUGFyYW1zIHtcbiAgYW1vdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmx1clBhcmFtcyB7XG4gIGFtb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJsYWNrd2hpdGVQYXJhbXMge1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXBpYVBhcmFtcyB7XG4gIHRvbmU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaXhlbGF0ZVBhcmFtcyB7XG4gIGFtb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9pbFBhaW50UGFyYW1zIHtcbiAgYW1vdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kdWxhdGVQYXJhbXMge1xuICBicmlnaHRuZXNzPzogbnVtYmVyO1xuICBodWU/OiBudW1iZXI7XG4gIHNhdHVyYXRpb24/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFydGlhbFBpeGVsYXRlUGFyYW1zIHtcbiAgYW1vdW50PzogbnVtYmVyO1xuICBibHVyPzogbnVtYmVyO1xuICB0eXBlPzogU2hhcGVUeXBlO1xuICBvYmplY3RzPzogW1tudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWFsQmx1clBhcmFtcyB7XG4gIGFtb3VudDogbnVtYmVyO1xuICBibHVyPzogbnVtYmVyO1xuICB0eXBlPzogU2hhcGVUeXBlO1xuICBvYmplY3RzPzogW1tudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb2xsYWdlUGFyYW1zIHtcbiAgbWFyZ2luPzogbnVtYmVyO1xuICB3aWR0aD86IG51bWJlcjtcbiAgaGVpZ2h0PzogbnVtYmVyO1xuICBjb2xvcj86IHN0cmluZztcbiAgZml0PzogRml0T3B0aW9ucztcbiAgZmlsZXM6IFtzdHJpbmddO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwc2NhbGVQYXJhbXMge1xuICB1cHNjYWxlPzogYm9vbGVhbjtcbiAgbm9pc2U/OiBOb2lzZVR5cGU7XG4gIHN0eWxlPzogU3R5bGVUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFzY2lpUGFyYW1zIHtcbiAgYmFja2dyb3VuZD86IHN0cmluZztcbiAgZm9yZWdyb3VuZD86IHN0cmluZztcbiAgY29sb3JlZD86IGJvb2xlYW47XG4gIHNpemU/OiBudW1iZXI7XG4gIHJldmVyc2U/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1YWxpdHlQYXJhbXMge1xuICB2YWx1ZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlY3VyaXR5UGFyYW1zIHtcbiAgcG9saWN5OiBzdHJpbmc7XG4gIHNpZ25hdHVyZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPdXRwdXRQYXJhbXMge1xuICBmb3JtYXQ6IHN0cmluZztcbiAgY29sb3JzcGFjZT86IHN0cmluZztcbiAgc3RyaXA/OiBib29sZWFuO1xuICBxdWFsaXR5PzogbnVtYmVyO1xuICBwYWdlPzogbnVtYmVyO1xuICBjb21wcmVzcz86IGJvb2xlYW47XG4gIGRlbnNpdHk/OiBudW1iZXI7XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIHNlY3VyZT86IGJvb2xlYW47XG4gIGRvY2luZm8/OiBib29sZWFuO1xuICBwYWdlZm9ybWF0Pzogc3RyaW5nO1xuICBwYWdlb3JpZW50YXRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVQYXJhbXMge1xuICBjYWNoZT86IGJvb2xlYW47XG4gIGV4cGlyeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZpZGVvQ29udmVydFBhcmFtcyB7XG4gIGFzcGVjdF9tb2RlOiBWaWRlb0FjY2Vzc01vZGU7XG4gIHByZXNldD86IFZpZGVvVHlwZXM7XG4gIGZvcmNlPzogYm9vbGVhbjtcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGV4dG5hbWU/OiBzdHJpbmc7XG4gIGZpbGVuYW1lPzogc3RyaW5nO1xuICBsb2NhdGlvbj86IExvY2F0aW9ucztcbiAgcGF0aD86IHN0cmluZztcbiAgYWNjZXNzPzogVmlkZW9BY2Nlc3M7XG4gIGNvbnRhaW5lcj86IHN0cmluZztcbiAgYXVkaW9fYml0cmF0ZT86IG51bWJlcjtcbiAgYXVkaW9fY29kZWM/OiBBdWRpb1R5cGVzO1xuICB1cHNjYWxlOiBib29sZWFuO1xuICB2aWRlb19iaXRyYXRlPzogbnVtYmVyO1xuICBhdWRpb19zYW1wbGVfcmF0ZT86IG51bWJlcjtcbiAgYXVkaW9fY2hhbm5lbHM/OiBudW1iZXI7XG4gIGNsaXBfbGVuZ3RoPzogc3RyaW5nO1xuICBjbGlwX29mZnNldD86IHN0cmluZztcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbiAgdHdvX3Bhc3M/OiBib29sZWFuO1xuICBmcHM/OiBudW1iZXI7XG4gIGtleWZyYW1lX2ludGVydmFsPzogbnVtYmVyO1xuICB3YXRlcm1hcmtfdXJsPzogc3RyaW5nO1xuICB3YXRlcm1hcmtfdG9wPzogbnVtYmVyO1xuICB3YXRlcm1hcmtfYm90dG9tPzogbnVtYmVyO1xuICB3YXRlcm1hcmtfcmlnaHQ/OiBudW1iZXI7XG4gIHdhdGVybWFya19sZWZ0PzogbnVtYmVyO1xuICB3YXRlcm1hcmtfd2lkdGg/OiBudW1iZXI7XG4gIHdhdGVybWFya19oZWlnaHQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVVJMU2NyZWVuc2hvdFBhcmFtcyB7XG4gIGFnZW50PzogVVJMU2NyZWVuc2hvdEFnZW50O1xuICB3aWR0aD86IG51bWJlcjtcbiAgaGVpZ2h0PzogbnVtYmVyO1xuICBtb2RlPzogVVJMU2NyZWVuc2hvdE1vZGU7XG4gIGRlbGF5PzogbnVtYmVyO1xuICBvcmllbnRhdGlvbj86IFVSTFNjcmVlbnNob3RPcmllbnRhdGlvbjtcbiAgZGV2aWNlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBFbmhhbmNlUHJlc2V0IHtcbiAgYXV0byA9ICdhdXRvJyxcbiAgdml2aWQgPSAndml2aWQnLFxuICBiZWF1dGlmeSA9ICdiZWF1dGlmeScsXG4gIGJlYXV0aWZ5UGx1cyA9ICdiZWF1dGlmeV9wbHVzJyxcbiAgZml4RGFyayA9ICdmaXhfZGFyaycsXG4gIGZpeE5vaXNlID0gJ2ZpeF9ub2lzZScsXG4gIGZpeFRpbnQgPSAnZml4X3RpbnQnLFxuICBvdXRkb3IgPSAnb3V0ZG9vcicsXG4gIGZpcmV3b3JrcyA9ICdmaXJld29ya3MnLFxufVxuZXhwb3J0IGludGVyZmFjZSBFbmhhbmNlUGFyYW1zIHtcbiAgcHJlc2V0PzogRW5oYW5jZVByZXNldDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZGZJbmZvUGFyYW1zIHtcbiAgY29sb3JpbmZvPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZGZDb252ZXJ0UGFyYW1zIHtcbiAgcGFnZW9yaWVudGF0aW9uPzogc3RyaW5nO1xuICBwYWdlZm9ybWF0Pzogc3RyaW5nO1xuICBwYWdlcz86IChzdHJpbmcgfCBudW1iZXIpW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFsbGJhY2tQYXJhbXMge1xuICBoYW5kbGU6IHN0cmluZztcbiAgY2FjaGU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWluaWZ5Q3NzUGFyYW1zIHtcbiAgZ3ppcD86IGJvb2xlYW47XG4gIGxldmVsPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1pbmlmeUpzUGFyYW1zIHtcbiAgZ3ppcD86IGJvb2xlYW47XG4gIHVzZV9iYWJlbF9wb2x5ZmlsbD86IGJvb2xlYW47XG4gIGtlZXBfZm5fbmFtZT86IGJvb2xlYW47XG4gIGtlZXBfY2xhc3NfbmFtZT86IGJvb2xlYW47XG4gIG1hbmdsZT86IGJvb2xlYW47XG4gIG1lcmdlX3ZhcnM/OiBib29sZWFuO1xuICByZW1vdmVfY29uc29sZT86IGJvb2xlYW47XG4gIHJlbW92ZV91bmRlZmluZWQ/OiBib29sZWFuO1xuICB0YXJnZXRzPzogbnVsbCB8IHN0cmluZztcbn1cblxuY29uc3QgaGFuZGxlUmVnZXhwID0gL15bXFx3XFwtXXsyMH18d2Y6XFwvXFwvW1xcd1xcLVxcL117MTA2fSQvO1xuXG4vKipcbiAqIENsYXNzIGZvciBoYW5kbGluZyBmaWxlbGlua3MuIEZvciBub3cgaXRzIHN1cHBvcnRzIGFsbCBmaWxlc3RhY2sgdHJhbnNmb3Jtcy5cbiAqIEl0IG91dHB1dHMgdHJhbnNmb3JtIHVybCBvciBhcnJheSBvZiB0cmFuc2Zvcm1zXG4gKiBAZXhhbXBsZVxuICogY29uc3QgbGluayA9IG5ldyBGaWxlbGluaygnaGFuZGxlIG9yIGV4dGVybmFsVXJsJywgJ2FwaWtleScpO1xuICogbGluay5mbGlwKCkuZmxvcCgpLnN0b3JlKCk7XG4gKlxuICogY29uc29sZS5sb2cobGluay50b1N0cmluZygpKTtcbiAqIC8vIGVuYWJsZSBiYXNlNjQgc3VwcG9ydFxuICogbGluay5zZXRCYXNlNjQodHJ1ZSlcbiAqXG4gKiBjb25zb2xlLmxvZyhsaW5rLnRvU3RyaW5nKCkpO1xuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBGaWxlbGlua1xuICovXG5leHBvcnQgY2xhc3MgRmlsZWxpbmsge1xuICAvKipcbiAgICogVmFsaWRhdG9yIGluc3RhbmNlXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgdmFsaWRhdG9yID0gZ2V0VmFsaWRhdG9yKFRyYW5zZm9ybVNjaGVtYSk7XG5cbiAgLyoqXG4gICAqIEFwcGxpZWQgdHJhbnNmb3JtcyBhcnJheVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHByaXZhdGUgdHJhbnNmb3JtcyA9IFtdO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgb3IgbXVsdGlwbGUgaGFuZGxlcyBpbiBhcnJheVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHByaXZhdGUgc291cmNlOiBzdHJpbmcgfCBzdHJpbmdbXTtcblxuICAvKipcbiAgICogQXBwbGljYXRpb24ga2V5XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBhcGlrZXk6IHN0cmluZztcblxuICAvKipcbiAgICogSXMgYmFzZTY0IHN1cHBvcnQgaXMgZW5hYmxlZFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwcml2YXRlIGI2NDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBzaG91bGQgdXNlIGEgdmFsaWRhdG9yIHRvIGNoZWNrIHBhcmFtcyBvZiBldmVyeSB0YXNrXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHByaXZhdGUgdXNlVmFsaWRhdG9yOiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogQ3VzdG9tIENOQU1FXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBjbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBPdmVyd3JpdGUgZG9tYWluICh0ZXN0IHB1cnBvc2VzKVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHByaXZhdGUgY3VzdG9tRG9tYWluOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENsYXNzIGZvciBnZW5lcmF0aW5nIHRyYW5mb3JtYXRpb24gdXJsc1xuICAgKiBAcGFyYW0geyhzdHJpbmcgfCBzdHJpbmdbXSl9IHNvdXJjZSAtIGhhbmRsZSBvciBtdWx0aXBsZSBoYW5kbGVzIChpLmUuIGZvciBjb2xsYWdlKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2FwaWtleV0gLSB5b3VyIGFwaWtleSAtIHJlcXVpcmVkIGZvciBhbGwgZXh0ZXJuYWwgc291cmNlc1xuICAgKlxuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTogc3RyaW5nIHwgc3RyaW5nW10sIGFwaWtleT86IHN0cmluZykge1xuICAgIHRoaXMuYXBpa2V5ID0gYXBpa2V5O1xuICAgIHRoaXMuc2V0U291cmNlKHNvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIG5ldyBiYXNlNjQgbGluayBzdXBwb3J0IHRvIGF2b2lkIHByb2JsZW1zIHdpdGggc3BlY2lhbCBjaGFycyBpbiBsaW5rXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZ1xuICAgKiBAcmV0dXJuc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNldEJhc2U2NChmbGFnOiBib29sZWFuKSB7XG4gICAgdGhpcy5iNjQgPSBmbGFnO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFN3aXRjaCB0aGUgdXNlVmFsaWRhdG9yIGZsYWdcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBmbGFnXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgc2V0VXNlVmFsaWRhdG9yKGZsYWc6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnVzZVZhbGlkYXRvciA9IGZsYWc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNuYW1lIGZvciB0cmFuc2Zvcm1hdGlvbiBsaW5rXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbmFtZVxuICAgKiBAcmV0dXJuc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNldENuYW1lKGNuYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNuYW1lID0gY25hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGN1c3RvbSBkb21haW4uIFVzZWQgZm9yIHRlc3QgcHVycG9zZS4gSXQgd2lsbCBiZSByZW1vdmVkIHdoZW4gYWZ0ZXIgY2xpZW50LnRyYW5zZm9ybVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZG9tYWluXG4gICAqIEByZXR1cm5zXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgc2V0Q3VzdG9tRG9tYWluKGRvbWFpbjogc3RyaW5nKSB7XG4gICAgdGhpcy5jdXN0b21Eb21haW4gPSBkb21haW47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRTb3VyY2Uoc291cmNlOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXG4gICAgY29uc3QgaXNFeHRlcm5hbCA9IHRoaXMuaXNTb3VyY2VFeHRlcm5hbCgpO1xuXG4gICAgZGVidWcoYFNvdXJjZSAke3NvdXJjZX0gLSBpc0V4dGVybmFsPyAke2lzRXh0ZXJuYWx9YCk7XG5cbiAgICBpZiAoaXNFeHRlcm5hbCAmJiAhdGhpcy5hcGlrZXkpIHtcbiAgICAgIHRocm93IG5ldyBGaWxlc3RhY2tFcnJvcignRXh0ZXJuYWwgc291cmNlcyByZXF1aXJlcyBhcGlrZXkgdG8gaGFuZGxlIHRyYW5zZm9ybXMnKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzRXh0ZXJuYWwgJiYgdHlwZW9mIHRoaXMuc291cmNlID09PSAnc3RyaW5nJyAmJiAhaGFuZGxlUmVnZXhwLnRlc3QodGhpcy5zb3VyY2UpICYmIHRoaXMuc291cmNlLmluZGV4T2YoJ2ZpbGVzdGFja2NvbnRlbnQnKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBGaWxlc3RhY2tFcnJvcignSW52YWxpZCBmaWxlc3RhY2sgc291cmNlIHByb3ZpZGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgSlNPTlNjaGVtYSBmb3JtIHRyYW5zZm9ybWF0aW9ucyBwYXJhbXNcbiAgICpcbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBnZXRWYWxpZGF0aW9uU2NoZW1hKCkge1xuICAgIHJldHVybiBUcmFuc2Zvcm1TY2hlbWE7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cmFuc2Zvcm1hdGlvbnMgaW4gSlNPTiBmb3JtYXRcbiAgICpcbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBnZXRUcmFuc2Zvcm1hdGlvbnMoKSB7XG4gICAgaWYgKHRoaXMudXNlVmFsaWRhdG9yKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlVGFza3ModGhpcy50cmFuc2Zvcm1zKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRyYW5zZm9ybSB1cmxcbiAgICpcbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICBjb25zdCByZXR1cm5VcmwgPSBbXTtcbiAgICByZXR1cm5VcmwucHVzaCh0aGlzLmdldENkbkhvc3QoKSk7XG5cbiAgICBpZiAodGhpcy51c2VWYWxpZGF0b3IpIHtcbiAgICAgIHRoaXMudmFsaWRhdGVUYXNrcyh0aGlzLnRyYW5zZm9ybXMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFwaWtleSkge1xuICAgICAgcmV0dXJuVXJsLnB1c2godGhpcy5hcGlrZXkpO1xuICAgIH1cblxuICAgIGxldCB0cmFuc2Zvcm1zU3RyaW5nID0gdGhpcy5nZW5lcmF0ZVRyYW5zZm9ybVN0cmluZygpO1xuXG4gICAgbGV0IHNvdXJjZSA9IHRoaXMuc291cmNlO1xuXG4gICAgaWYgKHRoaXMuYjY0KSB7XG4gICAgICBpZiAodGhpcy50cmFuc2Zvcm1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdHJhbnNmb3Jtc1N0cmluZyA9IGBiNjQvJHtiNjQoSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2Zvcm1zKSwgdHJ1ZSl9YDtcbiAgICAgIH1cblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgICBzb3VyY2UgPSB0aGlzLmFycmF5VG9TdHJpbmcoc291cmNlKTtcbiAgICAgIH1cblxuICAgICAgc291cmNlID0gYGI2NDovLyR7YjY0KHNvdXJjZSwgdHJ1ZSl9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgICBzb3VyY2UgPSB0aGlzLmFycmF5VG9TdHJpbmcoc291cmNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdXJjZSA9IHRoaXMuZXNjYXBlVmFsdWUoc291cmNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHJhbnNmb3Jtc1N0cmluZy5sZW5ndGgpIHtcbiAgICAgIHJldHVyblVybC5wdXNoKHRyYW5zZm9ybXNTdHJpbmcpO1xuICAgIH1cblxuICAgIHJldHVyblVybC5wdXNoKHNvdXJjZSk7XG4gICAgcmV0dXJuIHJldHVyblVybC5qb2luKCcvJyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRhc2sgYW5kIHZhbGlkYXRlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gW3BhcmFtc11cbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBhZGRUYXNrKG5hbWU6IHN0cmluZywgcGFyYW1zPykge1xuICAgIERlYnVnKGBBZGQgdGFzayAgJHtuYW1lfSB3aXRoIHBhcmFtcyAlT2AsIHBhcmFtcyk7XG5cbiAgICBpZiAobmFtZSAhPT0gJ2NhY2hlJyAmJiB0eXBlb2YgcGFyYW1zID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcgJiYgIU9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoKSB7XG4gICAgICBwYXJhbXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdGhpcy50cmFuc2Zvcm1zLnB1c2goeyBuYW1lLCBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdGFza3MgYWRkZWQgZm9yIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgZ2V0VGFza3MoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnVwIHRyYW5zZm9ybWF0aW9ucyBvbiBmaWxlbGlua1xuICAgKlxuICAgKiBAcmV0dXJuc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMudHJhbnNmb3JtcyA9IFtdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybWF0aW9ucyBwYXJ0XG4gICAqL1xuXG4gIC8qKlxuICAgKiBBZGQgYXV0b2ltYWdlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNhdXRvLWltYWdlLWNvbnZlcnNpb25cbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGF1dG9JbWFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdhdXRvX2ltYWdlJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBmbGlwIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNmbGlwXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBmbGlwKCkge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2ZsaXAnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGZsb3AgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2Zsb3BcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGZsb3AoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnZmxvcCcsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgaW1hZ2VzaXplIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNpbWFnZS1zaXplXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBpbWFnZXNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnaW1hZ2VzaXplJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBub01ldGFkYXRhIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNzdHJpcC1tZXRhZGF0YVxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgbm9NZXRhZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdub19tZXRhZGF0YScsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgUHJvZ3Jlc3NpdmUgSlBFRyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcHJvZ3Jlc3NpdmUtanBlZ1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcGpwZyhwYXJhbXM6IFByb2dyZXNzaXZlSnBnUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncGpwZycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBpbWFnZXNpemUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3NtYXJ0LWNyb3BcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHNtYXJ0Q3JvcChwYXJhbXM6IFNtYXJ0Q3JvcFBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3NtYXJ0X2Nyb3AnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgd2F0ZXJtYXJ0IHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyN3YXRlcm1hcmtcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHdhdGVybWFyayhwYXJhbXM6IFdhdGVybWFya1BhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3dhdGVybWFyaycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBlbmhhbmNlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNlbmhhbmNlXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBlbmhhbmNlKHBhcmFtcz86IEVuaGFuY2VQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdlbmhhbmNlJywgcGFyYW1zIHx8IHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBzZWN1cml0eSB0byBsaW5rXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNyZWRleWVcbiAgICogQHJldHVybnNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICByZWRleWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncmVkZXllJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG1vbm9jaHJvbWUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI21vbm9jaHJvbWVcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIG1vbm9jaHJvbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnbW9ub2Nocm9tZScsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBjb21wcmVzcyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jY29tcHJlc3NcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGNvbXByZXNzKHBhcmFtcz86IENvbXByZXNzUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnY29tcHJlc3MnLCBwYXJhbXMgfHwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBuZWdhdGl2ZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jbmVnYXRpdmVcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIG5lZ2F0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ25lZ2F0aXZlJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0YWdzIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyN0YWdzXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICB0YWdzKCkge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3RhZ3MnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHNmdyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jc2Z3XG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzZncoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnc2Z3JywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuaW1hdGUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2FuaW1hdGUtaW1hZ2VzLXRvLWdpZlxuICAgKiBAcGFyYW0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBhbmltYXRlKHBhcmFtczogQW5pbWF0aW9uUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnYW5pbWF0ZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBzdG9yZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jc3RvcmVcbiAgICogQHBhcmFtIHsoU3RvcmVQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzdG9yZShwYXJhbXM/OiBTdG9yZVBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdzdG9yZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjYWNoZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jY2FjaGVcbiAgICogQHBhcmFtIHsoQ2FjaGVQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBjYWNoZShwYXJhbXM6IENhY2hlUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2NhY2hlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHJlc2l6ZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcmVzaXplXG4gICAqIEBwYXJhbSB7UmVzaXplUGFyYW1zfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHJlc2l6ZShwYXJhbXM6IFJlc2l6ZVBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3Jlc2l6ZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjcm9wIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNjcm9wXG4gICAqIEBwYXJhbSB7Q3JvcFBhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBjcm9wKHBhcmFtczogQ3JvcFBhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2Nyb3AnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcm90YXRlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNyb3RhdGVcbiAgICogQHBhcmFtIHtSb3RhdGVQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcm90YXRlKHBhcmFtczogUm90YXRlUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncm90YXRlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGRldGVjdF9mYWNlcyB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jZmFjaWFsLWRldGVjdGlvblxuICAgKiBAcGFyYW0geyhEZXRlY3RGYWNlc1BhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGRldGVjdEZhY2VzKHBhcmFtcz86IERldGVjdEZhY2VzUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2RldGVjdF9mYWNlcycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjcm9wIGZhY2VzIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNjcm9wLWZhY2VzXG4gICAqIEBwYXJhbSB7Q3JvcEZhY2VzUGFyYW1zfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGNyb3BGYWNlcyhwYXJhbXM6IENyb3BGYWNlc1BhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2Nyb3BfZmFjZXMnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcGl4ZWxhdGUgZmFjZXMgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3BpeGVsYXRlLWZhY2VzXG4gICAqIEBwYXJhbSB7UGl4ZWxhdGVGYWNlc1BhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwaXhlbGF0ZUZhY2VzKHBhcmFtczogUGl4ZWxhdGVGYWNlc1BhcmFtcykge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3BpeGVsYXRlX2ZhY2VzJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGJsdXIgZmFjZXMgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2JsdXItZmFjZXNcbiAgICogQHBhcmFtIHtCbHVyRmFjZXNQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgYmx1ckZhY2VzKHBhcmFtczogQmx1ckZhY2VzUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnYmx1cl9mYWNlcycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyByb3VuZGVkIGNvcm5lcnMgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3JvdW5kZWQtY29ybmVyc1xuICAgKiBAcGFyYW0geyhSb3VuZGVkQ29ybmVyc1BhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHJvdW5kZWRDb3JuZXJzKHBhcmFtcz86IFJvdW5kZWRDb3JuZXJzUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3JvdW5kZWRfY29ybmVycycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBwb2xhcm9pZCB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcG9sYXJvaWRcbiAgICogQHBhcmFtIHsoUG9sYXJvaWRQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwb2xhcm9pZChwYXJhbXM/OiBQb2xhcm9pZFBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdwb2xhcm9pZCcsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB2aWduZXR0ZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jdmlnbmV0dGVcbiAgICogQHBhcmFtIHsoVmlnbmV0dGVQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICB2aWduZXR0ZShwYXJhbXM/OiBWaWduZXR0ZVBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCd2aWduZXR0ZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0b3JuIGVkZ2VzIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyN0b3JuLWVkZ2VzXG4gICAqIEBwYXJhbSB7KFRvcm5FZGdlc1BhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHRvcm5FZGdlcyhwYXJhbXM/OiBUb3JuRWRnZXNQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygndG9ybl9lZGdlcycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBzaGFkb3cgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3NoYWRvd1xuICAgKiBAcGFyYW0geyhTaGFkb3dQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzaGFkb3cocGFyYW1zPzogU2hhZG93UGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ3NoYWRvdycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjaXJjbGUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2NpcmNsZVxuICAgKiBAcGFyYW0geyhDaXJjbGVQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBjaXJjbGUocGFyYW1zPzogQ2lyY2xlUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2NpcmNsZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBib3JkZXIgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI2JvcmRlclxuICAgKiBAcGFyYW0geyhCb3JkZXJQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBib3JkZXIocGFyYW1zPzogQm9yZGVyUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2JvcmRlcicsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBzaGFycGVuIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNzaGFycGVuXG4gICAqIEBwYXJhbSB7KFNoYXJwZW5QYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzaGFycGVuKHBhcmFtcz86IFNoYXJwZW5QYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnc2hhcnBlbicsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBibHVyIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNibHVyXG4gICAqIEBwYXJhbSB7KEJsdXJQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBibHVyKHBhcmFtcz86IEJsdXJQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnYmx1cicsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBibGFja3doaXRlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNibGFja3doaXRlXG4gICAqIEBwYXJhbSB7KEJsYWNrd2hpdGVQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBibGFja3doaXRlKHBhcmFtcz86IEJsYWNrd2hpdGVQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnYmxhY2t3aGl0ZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBzZXBpYSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jc2VwaWFcbiAgICogQHBhcmFtIHsoU2VwaWFQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzZXBpYShwYXJhbXM/OiBTZXBpYVBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdzZXBpYScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBwaXhlbGF0ZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jcGl4ZWxhdGVcbiAgICogQHBhcmFtIHsoUGl4ZWxhdGVQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBwaXhlbGF0ZShwYXJhbXM/OiBQaXhlbGF0ZVBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdwaXhlbGF0ZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBvaWxwYWludCB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jb2lsLXBhaW50XG4gICAqIEBwYXJhbSB7KE9pbFBhaW50UGFyYW1zIHwgYm9vbGVhbil9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgb2lsUGFpbnQocGFyYW1zPzogT2lsUGFpbnRQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnb2lsX3BhaW50JywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIG1vZHVsYXRlIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNtb2R1bGF0ZVxuICAgKiBAcGFyYW0geyhNb2R1bGF0ZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIG1vZHVsYXRlKHBhcmFtcz86IE1vZHVsYXRlUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ21vZHVsYXRlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHBhcnRpYWwgcGl4ZWxhdGUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3BhcnRpYWwtcGl4ZWxhdGVcbiAgICogQHBhcmFtIHtQYXJ0aWFsUGl4ZWxhdGVQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcGFydGlhbFBpeGVsYXRlKHBhcmFtczogUGFydGlhbFBpeGVsYXRlUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncGFydGlhbF9waXhlbGF0ZScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBwYXJ0aWFsIGJsdXIgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3BhcnRpYWwtYmx1clxuICAgKiBAcGFyYW0ge1BhcnRpYWxCbHVyUGFyYW1zfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHBhcnRpYWxCbHVyKHBhcmFtczogUGFydGlhbEJsdXJQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdwYXJ0aWFsX2JsdXInLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgY29sbGFnZSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jY29sbGFnZVxuICAgKiBAcGFyYW0ge0NvbGxhZ2VQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgY29sbGFnZShwYXJhbXM6IENvbGxhZ2VQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdjb2xsYWdlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHVwc2NhbGUgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3Vwc2NhbGVcbiAgICogQHBhcmFtIHsoVXBzY2FsZVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHVwc2NhbGUocGFyYW1zPzogVXBzY2FsZVBhcmFtcyB8IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCd1cHNjYWxlJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFzY2lpIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNhc2NpaVxuICAgKiBAcGFyYW0geyhBc2NpaVBhcmFtcyB8IGJvb2xlYW4pfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGFzY2lpKHBhcmFtcz86IEFzY2lpUGFyYW1zIHwgYm9vbGVhbikge1xuICAgIHJldHVybiB0aGlzLmFkZFRhc2soJ2FzY2lpJywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHF1YWxpdHkgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3F1YWxpdHlcbiAgICogQHBhcmFtIHtRdWFsaXR5UGFyYW1zfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHF1YWxpdHkocGFyYW1zOiBRdWFsaXR5UGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncXVhbGl0eScsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBzZWN1cml0eSB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jc2VjdXJpdHlcbiAgICogQHBhcmFtIHtTZWN1cml0eVBhcmFtc30gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBzZWN1cml0eShwYXJhbXM6IFNlY3VyaXR5UGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnc2VjdXJpdHknLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgb3V0cHV0IHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNvdXRwdXRcbiAgICogQHBhcmFtIHtPdXRwdXRQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgb3V0cHV0KHBhcmFtczogT3V0cHV0UGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnb3V0cHV0JywgcGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHZpZGVvIGNvbnZlcnQgdHJhbnNmb3JtYXRpb25cbiAgICpcbiAgICogQHNlZSBodHRwczovL3d3dy5maWxlc3RhY2suY29tL2RvY3MvYXBpL3Byb2Nlc3NpbmcvI3ZpZGVvLWNvbnZlcnRcbiAgICogQHBhcmFtIHtWaWRlb0NvbnZlcnRQYXJhbXN9IHBhcmFtc1xuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgdmlkZW9Db252ZXJ0KHBhcmFtczogVmlkZW9Db252ZXJ0UGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygndmlkZW9fY29udmVydCcsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBVUkxTY3JlZW5zaG90IHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyN1cmxzY3JlZW5zaG90XG4gICAqIEBwYXJhbSB7KFVSTFNjcmVlbnNob3RQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBVUkxTY3JlZW5zaG90KHBhcmFtcz86IFVSTFNjcmVlbnNob3RQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygndXJsc2NyZWVuc2hvdCcsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBwZGZpbmZvIHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNwZGZpbmZvXG4gICAqIEBwYXJhbSB7KFBkZkluZm9QYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBQREZJbmZvKHBhcmFtcz86IFBkZkluZm9QYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncGRmaW5mbycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBwZGZjb252ZXJ0IHRyYW5zZm9ybWF0aW9uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyNwZGZjb252ZXJ0XG4gICAqIEBwYXJhbSB7KFBkZkNvbnZlcnRQYXJhbXMgfCBib29sZWFuKX0gcGFyYW1zXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICogQG1lbWJlcm9mIEZpbGVsaW5rXG4gICAqL1xuICBQREZDb252ZXJ0KHBhcmFtcz86IFBkZkNvbnZlcnRQYXJhbXMgfCBib29sZWFuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygncGRmY29udmVydCcsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBmYWxsYmFjayB0cmFuc2Zvcm1hdGlvblxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmZpbGVzdGFjay5jb20vZG9jcy9hcGkvcHJvY2Vzc2luZy8jZmFsbGJhY2tcbiAgICogQHBhcmFtIHsoRmFsbGJhY2tQYXJhbXMpfSBwYXJhbXNcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIGZhbGxiYWNrKHBhcmFtczogRmFsbGJhY2tQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdmYWxsYmFjaycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHppcCB0cmFuc2Zvcm1hdGlvbiB3aGljaCBjcmVhdGUgYSB6aXAgcGFja2FnZSBvbiBmaWxlc1xuICAgKiB1c2VkIG9uIGFjdHVhbCBjb250ZXh0XG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZmlsZXN0YWNrLmNvbS9kb2NzL2FwaS9wcm9jZXNzaW5nLyN6aXBcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIHppcCgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCd6aXAnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGFzayB3aGljaCBtaW5pZnkgYSBjc3MgZmlsZVxuICAgKlxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgbWluaWZ5Q3NzKHBhcmFtczogTWluaWZ5Q3NzUGFyYW1zKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkVGFzaygnbWluaWZ5X2NzcycsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRhc2sgd2hpY2ggbWluaWZ5IGEgamF2YXNjcmlwdCBmaWxlLlxuICAgKiBGb3IgYmV0dGVyIGhhbmRsaW5nIG9mICd0YXJnZXRzJyBwYXJhbSwgdXNlIHdpdGggYjY0IGZsYWcgZW5hYmxlZC5cbiAgICpcbiAgICogQHJldHVybnMgdGhpc1xuICAgKiBAbWVtYmVyb2YgRmlsZWxpbmtcbiAgICovXG4gIG1pbmlmeUpzKHBhcmFtczogTWluaWZ5SnNQYXJhbXMpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKCdtaW5pZnlfanMnLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBzb3VyY2UgaXMgZXh0ZXJuYWxcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBpc1NvdXJjZUV4dGVybmFsKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5zb3VyY2UpIHtcbiAgICAgIHRocm93IG5ldyBGaWxlc3RhY2tFcnJvcignU291cmNlIG5vdCBTZXQnKTtcbiAgICB9XG5cbiAgICBsZXQgdG9UZXN0ID0gQXJyYXkuaXNBcnJheSh0aGlzLnNvdXJjZSkgPyB0aGlzLnNvdXJjZSA6IFt0aGlzLnNvdXJjZV07XG4gICAgZm9yIChsZXQgaSBpbiB0b1Rlc3QpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICBpZiAoIXRvVGVzdC5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRvVGVzdFtpXS5pbmRleE9mKCdzcmM6JykgPT09IDAgfHwgKHRvVGVzdFtpXS5pbmRleE9mKCdodHRwJykgPT09IDAgJiYgdG9UZXN0W2ldLmluZGV4T2YoJ2ZpbGVzdGFja2NvbnRlbnQnKSA9PT0gLTEpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBldmVyeSB0YXNrIGFnYWluc3Qgc2NoZW1hXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7b2JqZWN0W119IHRyYW5zZm9ybWF0aW9ucyAtIG9iamVjdCB3aGljaCBjb250YWluIGFsbCB0cmFuc2Zvcm1hdGlvbnNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZVRhc2tzKHRyYW5zZm9ybWF0aW9uczogb2JqZWN0W10pOiB2b2lkIHtcbiAgICBjb25zdCByZXMgPSBGaWxlbGluay52YWxpZGF0b3IodGhpcy5hcnJheVRvT2JqZWN0KHRyYW5zZm9ybWF0aW9ucywgJ25hbWUnLCAncGFyYW1zJykpO1xuICAgIGlmIChyZXMuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEZpbGVzdGFja0Vycm9yKGBQYXJhbXMgdmFsaWRhdGlvbiBlcnJvcmAsIHJlcy5lcnJvcnMsIEZpbGVzdGFja0Vycm9yVHlwZS5WQUxJREFUSU9OKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjb3JyZWN0IGNkbiB1cmwgd2l0aCBjbmFtZSBzdXBwb3J0XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRDZG5Ib3N0KCk6IHN0cmluZyB7XG4gICAgbGV0IHVybHMgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcudXJscyk7XG5cbiAgICBpZiAodGhpcy5jdXN0b21Eb21haW4pIHtcbiAgICAgIHVybHMuY2RuVXJsID0gdGhpcy5jdXN0b21Eb21haW47XG4gICAgfVxuXG4gICAgdXJscyA9IHJlc29sdmVIb3N0KHVybHMsIHRoaXMuY25hbWUpO1xuXG4gICAgcmV0dXJuIHVybHMuY2RuVXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYXBwbGllZCB0cmFuc2Zvcm1hdGlvbnMgYXMgc3RyaW5nXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRyYW5zZm9ybVN0cmluZygpOiBzdHJpbmcge1xuICAgIGxldCB0cmFuc2Zvcm1zID0gW107XG5cbiAgICB0aGlzLnRyYW5zZm9ybXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICB0cmFuc2Zvcm1zLnB1c2godGhpcy5vcHRpb25Ub1N0cmluZyhlbC5uYW1lLCBlbC5wYXJhbXMpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cmFuc2Zvcm1zLmpvaW4oJy8nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbGF0dGVuIHRyYW5zZm9ybWF0aW9uIG9wdGlvbiB0byBzdHJpbmdcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQGV4YW1wbGUge3Jlc2l6ZTp7d2lkdGg6IDEwMCxoZWlnaHQ6IDIwMH19ID0+IHJlc2l6ZT13aWR0aDoxMDAsaGVpZ2h0OjIwMFxuICAgKiBAcGFyYW0ga2V5IC0gb3B0aW9uIGtleVxuICAgKiBAcGFyYW0gdmFsdWVzIC0gb3B0aW9uIHBhcmFtc1xuICAgKi9cbiAgcHJpdmF0ZSBvcHRpb25Ub1N0cmluZyhrZXk6IHN0cmluZywgdmFsdWVzOiBhbnkpOiBzdHJpbmcge1xuICAgIGxldCBvcHRpb25zU3RyaW5nOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmICh0eXBlb2YgdmFsdWVzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG5cbiAgICAvLyBpZiB3ZSBqdXN0IHdhbnQgdG8gZW5hYmxlIGZlYXR1cmVcbiAgICBpZiAodHlwZW9mIHZhbHVlcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBpZiAoIXZhbHVlcyAmJiBrZXkgPT09ICdjYWNoZScpIHtcbiAgICAgICAgcmV0dXJuICdjYWNoZT1mYWxzZSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmtleXModmFsdWVzKS5mb3JFYWNoKGkgPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzW2ldKSkge1xuICAgICAgICBvcHRpb25zU3RyaW5nLnB1c2goYCR7aX06JHt0aGlzLmFycmF5VG9TdHJpbmcodmFsdWVzW2ldKX1gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zU3RyaW5nLnB1c2goYCR7aX06JHt0aGlzLmVzY2FwZVZhbHVlKHZhbHVlc1tpXSl9YCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYCR7a2V5fT0ke29wdGlvbnNTdHJpbmcuam9pbignLCcpfWA7XG4gIH1cblxuICAvKipcbiAgICogRXNjYXBlIHBhcmFtcyB2YWx1ZXNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBGaWxlbGlua1xuICAgKi9cbiAgcHJpdmF0ZSBlc2NhcGVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZS5pbmRleE9mKCcvJykgPiAtMSB8fCB2YWx1ZS5pbmRleE9mKCcsJykgPiAtMSkge1xuICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBuZXN0ZWQgYXJyYXlzIHRvIHN0cmluZ1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAZXhhbXBsZSBbMSwyLCBbMiwzXV0gPT4gXCJbMSwyLCBbMiwzXV1cIlxuICAgKiBAcGFyYW0gYXJyIC0gYW55IGFycmF5XG4gICAqL1xuICBwcml2YXRlIGFycmF5VG9TdHJpbmcoYXJyOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9SZXR1cm4gPSBhcnIubWFwKGVsID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheVRvU3RyaW5nKGVsKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZXNjYXBlVmFsdWUoZWwpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGBbJHt0b1JldHVybn1dYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhcnJheSBvZiBvYmplY3RzIHRvIG9iamVjdFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAZXhhbXBsZSBbe25hbWU6ICdyZXNpemUnLCBwYXJhbXM6IHtoZWlnaHQ6IDEyNX19XSA9PiB7cmVzaXplOiB7aGVpZ2h0OiAxMjV9fVxuICAgKiBAcGFyYW0gYXJyIC0gYW55IGFycmF5XG4gICAqL1xuICBwcml2YXRlIGFycmF5VG9PYmplY3QgPSAoYXJyYXk6IG9iamVjdFtdID0gW10sIG5hbWVLZXk6IHN0cmluZywgZGF0YUtleTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIGFycmF5LnJlZHVjZSgob2JqLCBpdGVtKSA9PiB7XG4gICAgICBvYmpbaXRlbVtuYW1lS2V5XV0gPSBpdGVtW2RhdGFLZXldO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gIH1cbn1cbiJdfQ==
